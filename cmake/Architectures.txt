#Set the default build type to Release
if (NOT CMAKE_BUILD_TYPE)
   message("-DCMAKE_BUILD_TYPE was not provided, using Release as default")
   set(CMAKE_BUILD_TYPE "Release")
endif()

#Try to guess the architecture used
site_name(sitename)
set (configfile "NOTFOUND")
if (${Fleur_custom_toolchain})
   set (configfile "cmake/cmake.config")
elseif (${sitename} MATCHES "cluster.*")
   set (configfile "cmake/cmake.rwth.config")
elseif ($ENV{FC} MATCHES "pgf.*")
   set (configfile "cmake/cmake.pgfortran.config")
elseif ($ENV{FC} MATCHES "gfortran.*")
   set (configfile "cmake/cmake.gfortran.config")
elseif ($ENV{FC} MATCHES "ifort.*")
   set (configfile "cmake/cmake.ifort.config")
elseif (CMAKE_SYSTEM_NAME MATCHES "Darwin")
   set (configfile "cmake/cmake.darwin.config")
elseif (${sitename} MATCHES "iff.*")
   set (configfile "cmake/cmake.iff.config")
elseif (${sitename} MATCHES "jrl.*")
   message("Identified jureca machine. Set GPU=yes if you want to use GPU version")
   if ($ENV{GPU} MATCHES "yes")
      set (configfile "cmake/cmake.jurecaGPU.config")
   else()
	set (configfile "cmake/cmake.jureca.config")
   endif()
elseif (${sitename} MATCHES "juquee.*")
   set (configfile "cmake/cmake.juqueen.config")
endif ()

if (${configfile} MATCHES "NOTFOUND")
    message(FATAL_ERROR "No configuration file found\nYou should create a toolchain file" )
else ()
    include(${configfile})
endif ()
include(cmake/compileenv.txt)
