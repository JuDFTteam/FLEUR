#juDFT Testscript
#The following arguments are passed: executable, working directory

jt::testrun($executable,"$workdir/inb");
jt::testrun($executable,"$workdir/lib");

#now test output for inb subdirectory
$result=jt::test_grepexists("$workdir/inb/out","it=  1  is completed");
$result+=jt::test_grepnumber("$workdir/inb/out","new fermi energy",": *([^ ]*)",0.2849,0.0001);
$result+=jt::test_grepnumber("$workdir/inb/out","total energy=","= *([^ ]*)",-242.820,0.001);
$result+=jt::test_grepnumber("$workdir/inb/out","distance of charge densitie","1: *([^ ]*)",3.660,0.001);

#for lib subdirectory as well; values do not actually matter, but they need to be the same as above
$result=jt::test_grepexists("$workdir/lib/out","it=  1  is completed");
$result+=jt::test_grepnumber("$workdir/lib/out","new fermi energy",": *([^ ]*)",0.2849,0.0001);
$result+=jt::test_grepnumber("$workdir/lib/out","total energy=","= *([^ ]*)",-242.820,0.001);
$result+=jt::test_grepnumber("$workdir/lib/out","distance of charge densitie","1: *([^ ]*)",3.660,0.001);

#jt::stageresult($workdir,$result,"2");
