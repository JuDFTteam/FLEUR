#juDFT Testscript

jt::copyfile("files/inp.xml",$workdir);
jt::copyfile("files/enpara",$workdir);

jt::testrun("$executable ",$workdir);

#now test output
$result=jt::test_fileexists("$workdir/bands.1");
if(jt::test_fileexists("$workdir/cdn.hdf") == 0){
   # Note: For the test the correction of the Fermi energy with HDF5 is wrong because
   #       the band structure is calculated directly on top of the starting
   #       density (previous eFermi = 0.0).
   $result+=jt::test_grepexists("$workdir/bands.1","0\.033629.*\-0\.400779"); #line 2
   $result+=jt::test_grepexists("$workdir/bands.1","0\.269033.*0\.614193"); #line 9
   $result+=jt::test_grepexists("$workdir/bands.1","0\.336291.*32\.833232"); #line 351
   $result+=jt::test_grepexists("$workdir/bands.1","0\.638954.*33\.485766"); #line 360
}else{
   $result+=jt::test_grepexists("$workdir/bands.1","0\.033629.*\-11\.565510"); #line 2
   $result+=jt::test_grepexists("$workdir/bands.1","0\.269033.*\-10\.550538"); #line 9
   $result+=jt::test_grepexists("$workdir/bands.1","0\.336291.*21\.668500"); #line 351
   $result+=jt::test_grepexists("$workdir/bands.1","0\.638954.*22\.321034"); #line 360
}

jt::stageresult($workdir,$result,"1");
