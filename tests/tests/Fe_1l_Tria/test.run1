#juDFT Testscript
#The following arguments are passed: executable, working directory

jt::copyfile("files/inp.xml",$workdir);
	
jt::testrun("$executable ",$workdir);

#now test output
$result=jt::test_grepexists("$workdir/out","it= *5 *is completed");
$result+=jt::test_greplastnumber("$workdir/out","fermi energy",".*= *([^ ]*)",-0.17248,0.005);
$result+=jt::test_greplastnumber("$workdir/out","total energy=",".*= *([^ ]*)",-1272.6241844197,0.01);
$result+=jt::test_grepnumber("$workdir/out","distance of charge densities for it= *1",": *([^ ]*)",9.8,0.5);

jt::stageresult($workdir,$result,"1");
