#juDFT Testscript
#The following arguments are passed: executable, working directory

jt::copyfile("files/inp-2.xml","$workdir/inp.xml");
jt::testrun("$executable ",$workdir);

$result+=jt::test_fileexists("$workdir/out");
$result+=min(jt::test_fileexists("$workdir/cdn1"),jt::test_fileexists("$workdir/cdn.hdf"));

$result+=jt::test_fileexists("$workdir/denIn_A1.xsf");
$result+=jt::test_fileexists("$workdir/denIn_A2.xsf");
$result+=jt::test_grepexists("$workdir/denIn_A2.xsf","2.86600");
$result+=jt::test_grepexists("$workdir/denIn_A2.xsf","1.433000");
$result+=jt::test_grepexists("$workdir/denIn_A2.xsf","0.5291772");
$result+=jt::test_grepexists("$workdir/denIn_A2.xsf","1.6697521");
$result+=jt::test_grepexists("$workdir/denIn_A2.xsf","2.1159156");
$result+=jt::test_grepexists("$workdir/denIn_A2.xsf","5.6444581");
$result+=jt::test_grepexists("$workdir/denIn_A2.xsf","8.5496229");
$result+=jt::test_fileexists("$workdir/denIn_A3.xsf");
$result+=jt::test_fileexists("$workdir/denIn_f.xsf");
$result+=jt::test_fileexists("$workdir/vTot_f.xsf");
$result+=jt::test_grepexists("$workdir/vTot_f.xsf","2.86600");
$result+=jt::test_grepexists("$workdir/vTot_f.xsf","1.433000");
$result+=jt::test_grepexists("$workdir/vTot_f.xsf","0.5291772");
$result+=jt::test_grepexists("$workdir/vTot_f.xsf","161.584969");
$result+=jt::test_grepexists("$workdir/vTot_f.xsf","3.7368643");
$result+=jt::test_grepexists("$workdir/vTot_f.xsf","1.6543182");
$result+=jt::test_grepexists("$workdir/vTot_f.xsf","0.5280119");
$result+=jt::test_fileexists("$workdir/vTot_A1.xsf");
$result+=jt::test_fileexists("$workdir/vTot_A2.xsf");
$result+=jt::test_fileexists("$workdir/vTot_A3.xsf");

#3D Vectorplot section
$result+=jt::test_fileexists("$workdir/vTot_A_vec_plot.xsf");
$result+=jt::test_fileexists("$workdir/denIn_A_vec_plot.xsf");
$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","2.86600");
$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","1.43300");

$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","0.1175948");
$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","8.923762");
$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","0.411582");
$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","5.471464");
$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","2.204819");
$result+=jt::test_grepexists("$workdir/denIn_A_vec_plot.xsf","1.0000000");

$result+=jt::test_grepexists("$workdir/vTot_A_vec_plot.xsf","2.86600");
$result+=jt::test_grepexists("$workdir/vTot_A_vec_plot.xsf","1.43300");

$result+=jt::test_grepexists("$workdir/vTot_A_vec_plot.xsf","0.411582");
$result+=jt::test_grepexists("$workdir/vTot_A_vec_plot.xsf","4.654497");
$result+=jt::test_grepexists("$workdir/vTot_A_vec_plot.xsf","0.1175948");



jt::stageresult($workdir,$result,"2");
