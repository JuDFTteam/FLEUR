#juDFT Testscript

jt::copyfile("files/inp3.xml","$workdir/inp.xml");

jt::testrun("$executable ",$workdir);

#now test output
$result=jt::test_fileexists("$workdir/out");

#Test the charges for the decomposition
$result+=jt::test_grepexists("$workdir/out","0.2073");
$result+=jt::test_grepexists("$workdir/out","5.835");
$result+=jt::test_grepexists("$workdir/out","0.020");

#How to do these checks (Depends on HDF5 how the data is written out)
$result+=min(jt::test_fileexists("$workdir/jDOS.1")+
     jt::test_grepexists("$workdir/jDOS.1","0.850633")+
     jt::test_grepexists("$workdir/jDOS.1","0.300025")+
     jt::test_grepexists("$workdir/jDOS.1","0.980324")+
     jt::test_grepexists("$workdir/jDOS.1","0.263514"),
     jt::test_fileexists("$workdir/banddos.hdf"));

jt::stageresult($workdir,$result,"3");
