#juDFT Testscript

jt::copyfile("files/inp.xml",$workdir);
jt::copyfile("files/kpts.xml",$workdir);
jt::copyfile("files/sym.xml",$workdir);

jt::testrun("$executable",$workdir);

#now test output
$result=jt::test_grepexists("$workdir/out","FORCES: SURFACE CORRECTION");

$result+=jt::test_grep_firstnumber("$workdir/out","FX_IS","FX_IS *= *([^ ]*)",0,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_IS","FX_IS *= *([^ ]*)",0,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_IS","FY_IS *= *([^ ]*)",0.000000,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_IS","FY_IS *= *([^ ]*)",-0.000021,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_IS","FZ_IS *= *([^ ]*)",0.000000,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_IS","FZ_IS *= *([^ ]*)",-0.000003,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_MT","FX_MT *= *([^ ]*)",-0.000090,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_MT","FX_MT *= *([^ ]*)",0.005375,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_MT","FY_MT *= *([^ ]*)",-0.000250,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_MT","FY_MT *= *([^ ]*)",-0.020187,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_MT","FZ_MT *= *([^ ]*)",-0.000308,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_MT","FZ_MT *= *([^ ]*)",0.001556,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_SF","FX_SF *= *([^ ]*)",-0.007899,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_SF","FX_SF *= *([^ ]*)",0.040664,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_SF","FY_SF *= *([^ ]*)",0.027425,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_SF","FY_SF *= *([^ ]*)",-0.021777,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_SF","FZ_SF *= *([^ ]*)",0.015781,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_SF","FZ_SF *= *([^ ]*)",-0.046126,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_TOT","FX_TOT *= *([^ ]*)",-0.033440,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_TOT","FX_TOT *= *([^ ]*)",-0.071340,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_TOT","FY_TOT *= *([^ ]*)",-0.035890,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_TOT","FY_TOT *= *([^ ]*)",0.014537,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_TOT","FZ_TOT *= *([^ ]*)",0.004741,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_TOT","FZ_TOT *= *([^ ]*)",0.085641,0.0001);

jt::stageresult($workdir,$result,"1");
