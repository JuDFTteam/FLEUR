#juDFT Testscript

jt::copyfile("files/inp.xml",$workdir);
jt::copyfile("files/kpts.xml",$workdir);
jt::copyfile("files/sym.xml",$workdir);

jt::testrun("$executable",$workdir);

#now test output
$result=jt::test_grepexists("$workdir/out","FORCES: SURFACE CORRECTION");

$result+=jt::test_grep_firstnumber("$workdir/out","FX_A12","FX_A12 *= *([^ ]*)",-0.003566,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_A12","FX_A12 *= *([^ ]*)",0.119741,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_IS","FZ_IS *= *([^ ]*)",-0.000003,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_IS","FX_IS *= *([^ ]*)",-0.000003,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_MT","FX_MT *= *([^ ]*)",-0.000090,0.00001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_MT","FX_MT *= *([^ ]*)",0.005375,0.00001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_A4","FX_A4 *= *([^ ]*)",0.018906,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_A4","FX_A4 *= *([^ ]*)",0.045928,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_SF","FX_SF *= *([^ ]*)",-0.007899,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_SF","FX_SF *= *([^ ]*)",0.040664,0.0001);

jt::stageresult($workdir,$result,"1");
