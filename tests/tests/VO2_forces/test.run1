#juDFT Testscript

jt::copyfile("files/inp.xml",$workdir);
jt::copyfile("files/kpts.xml",$workdir);
jt::copyfile("files/sym.xml",$workdir);

jt::testrun("$executable",$workdir);

#now test output

$result+=jt::test_grep_firstnumber("$workdir/out","FX_A8","FX_A8 *= *([^ ]*)",-0.000153,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_A8","FX_A8 *= *([^ ]*)",-0.106870,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_A8","FY_A8 *= *([^ ]*)",-0.124257,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_A8","FY_A8 *= *([^ ]*)",0.052459,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_A8","FZ_A8 *= *([^ ]*)",-0.060538,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_A8","FZ_A8 *= *([^ ]*)",0.120169,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_A3","FX_A3 *= *([^ ]*)",-0.043394,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_A3","FX_A3 *= *([^ ]*)",-0.181073,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_A3","FY_A3 *= *([^ ]*)",-0.161893,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_A3","FY_A3 *= *([^ ]*)",0.085353,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_A3","FZ_A3 *= *([^ ]*)",-0.042752,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_A3","FZ_A3 *= *([^ ]*)",0.200983,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_A4","FX_A4 *= *([^ ]*)",0.018906,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_A4","FX_A4 *= *([^ ]*)",0.045934,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_A4","FY_A4 *= *([^ ]*)",0.074452,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_A4","FY_A4 *= *([^ ]*)",-0.021553,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_A4","FZ_A4 *= *([^ ]*)",0.020155,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_A4","FZ_A4 *= *([^ ]*)",-0.050975,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FX_TOT","FX_TOT *= *([^ ]*)",-0.024332,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FX_TOT","FX_TOT *= *([^ ]*)",-0.117370,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FY_TOT","FY_TOT *= *([^ ]*)",-0.065113,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FY_TOT","FY_TOT *= *([^ ]*)",0.056519,0.0001);
$result+=jt::test_grep_firstnumber("$workdir/out","FZ_TOT","FZ_TOT *= *([^ ]*)",-0.012405,0.0001);
$result+=jt::test_grep_lastnumber("$workdir/out","FZ_TOT","FZ_TOT *= *([^ ]*)",0.130208,0.0001);

jt::stageresult($workdir,$result,"1");
